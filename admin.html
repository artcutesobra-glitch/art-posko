<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Access</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

<h3>Checking admin access‚Ä¶</h3>

<script>
(function () {

  /* ===============================
     CONFIG (IKAW LANG ANG BABAGUHIN)
  =============================== */

  const VALID_TOKEN = "ADMIN123"; // üîë PALITAN MO ITO
  const ADMIN_PIN  = "2468";      // üîê PALITAN MO ITO

  const VERIFIED_KEY = "posko_admin_verified"; // huwag galawin

  /* ===============================
     TOKEN CHECK
  =============================== */

  const params = new URLSearchParams(window.location.search);
  const token = params.get("token");

  if (token !== VALID_TOKEN) {
    document.body.innerHTML = "‚õî Invalid admin link";
    throw new Error("Invalid token");
  }

  /* ===============================
     PIN CHECK (PER DEVICE)
  =============================== */

  const verified = localStorage.getItem(VERIFIED_KEY);

  if (!verified) {
    const pin = prompt("üîê Enter Admin PIN:");

    if (pin !== ADMIN_PIN) {
      document.body.innerHTML = "‚õî Wrong PIN";
      throw new Error("Wrong PIN");
    }

    // ‚úÖ mark this device as admin-verified
    localStorage.setItem(VERIFIED_KEY, "yes");
  }

  /* ===============================
     ACCESS GRANTED ‚Üí OPEN APP
  =============================== */

  window.location.href = "./index.html";

})();
</script>

</body>
</html>

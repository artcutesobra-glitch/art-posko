<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Generator</title>
</head>
<body>

<h2 id="status">Checking access...</h2>

<div id="panel" style="display:none">
  <h3>ADMIN GENERATOR</h3>
  <button onclick="generate()">Generate One-Time Link</button>
  <pre id="out"></pre>
</div>

<script>
const WORKER_URL = "https://one-time-invite.artcutesobra.workers.dev";
const MASTER_TOKEN = "MASTER111";

// ðŸ”‘ read token from URL
const urlToken = new URLSearchParams(window.location.search).get("token");

if (urlToken !== MASTER_TOKEN) {
  document.getElementById("status").innerText = "UNAUTHORIZED";
} else {
  document.getElementById("status").style.display = "none";
  document.getElementById("panel").style.display = "block";
}

async function generate() {
  try {
    const res = await fetch(WORKER_URL + "/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ masterToken: MASTER_TOKEN })
    });

    const data = await res.json();

    // ðŸ‘‰ DITO LALABAS ANG LINK
    document.getElementById("out").textContent =
      data.link || JSON.stringify(data, null, 2);

  } catch (err) {
    document.getElementById("out").textContent = "ERROR: " + err.message;
  }
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="tl">
<head>
<meta charset="UTF-8">
<title>Admin ‚Äì Master Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.card{background:#fff;padding:20px;border-radius:8px;max-width:500px;margin:auto}
input,button{width:100%;padding:12px;margin-top:10px}
button{cursor:pointer}
</style>
</head>
<body>

<div class="card">
  <h2>üîê Admin ‚Äì Master Access</h2>

  <input id="masterToken" placeholder="Master Token">
  <input id="masterPin" type="password" placeholder="Master PIN">

  <button onclick="generate()">Generate One-Time Link</button>

  <div id="result"></div>
</div>

<script>
const WORKER_URL = "https://one-time-invite.artcutesobra.workers.dev";
const REPO_APP_URL = "https://art-posko.pages.dev";
  
async function generate(){
  const token = document.getElementById("masterToken").value;
  const pin = document.getElementById("masterPin").value;
  const result = document.getElementById("result");

  if(!token || !pin){
    result.innerText = "‚ùå Master token at PIN required";
    return;
  }

  result.innerText = "‚è≥ Generating...";

  try{
    const res = await fetch(`${WORKER_URL}/generate`,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ masterToken:token, masterPin:pin })
    });

    const data = await res.json();

    if(data.error){
      result.innerText = "‚ùå " + data.error;
      return;
    }

    result.innerHTML = `
      <p><b>One-Time Link:</b></p>
      <input value="${data.link}" readonly onclick="this.select()">
      <small>Send this link to user</small>
    `;
  }catch{
    result.innerText = "‚ùå Error connecting to worker";
  }
}
</script>

</body>
</html>


<!DOCTYPE html>
<html>
<body>
<h2>ENTER PIN</h2>

<input id="pin" type="password" placeholder="PIN">
<button onclick="verify()">Verify</button>

<p id="msg"></p>

<script>
const WORKER_URL = "https://one-time-invite.artcutesobra.workers.dev";
const REPO_APP_URL = "https://art-posko.pages.dev";

const token = new URLSearchParams(location.search).get("token");

async function verify(){
  const pin = document.getElementById("pin").value;

  const res = await fetch(WORKER_URL + "/verify", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ token, pin })
  });

  const data = await res.json();

  if(data.success){
    document.getElementById("msg").innerText = "ACCESS GRANTED";
    setTimeout(()=>location.href = REPO_APP_URL,1000);
  }else{
    document.getElementById("msg").innerText = data.error;
  }
}
</script>
</body>
</html>


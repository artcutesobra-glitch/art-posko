<!DOCTYPE html>
<html lang="tl">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width,
               initial-scale=1,
               maximum-scale=1,
               user-scalable=no">

<title>POS ‚Äì Offline IndexedDB</title>

<link rel="manifest" href="/art-posko/manifest.json">

<link rel="icon" href="/art-posko/icons/icon-192.png">
<link rel="apple-touch-icon" href="/art-posko/icons/icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="/art-posko/icons/icon-512.png">


<link rel="stylesheet" href="css/style.css">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="AMPRODUCTION POS">
<meta name="theme-color" content="#28a745">

<style>




</style>
</head>

<body>

<header>
  <b>AMPRODUCTION</b>
  <!-- RIGHT SIDE -->
  <div style="display:flex;align-items:center;gap:10px;">

    <!-- üîí LOCK ADMIN (ADMIN ONLY) -->
    <button
      id="lockAdminBtn"
      onclick="lockAdmin()"
      data-admin
      title="Lock Admin"
      style="
        background:none;
        border:none;
        font-size:20px;
        cursor:pointer;
        font-weight:900;
      "
    >
      üîí
    </button>
  <div id="hamburger">‚ò∞</div>
  <div id="dropdown">
    <button onclick="toggleDark()">üåô Dark Mode</button>
    <button onclick="togglePin()">üîê PIN Lock</button>
    <button onclick="changePin()" data-admin>üîë Change PIN</button>
    <button onclick="openProductModal()" data-admin>‚úèÔ∏è Edit Product</button>
    <button onclick="changeHeaderName()" data-admin>
      üè∑Ô∏è Change Header Name
      </button>
    <button onclick="restoreLastBackup()" data-admin>‚ôªÔ∏è Restore Backup</button>
    <button onclick="openEODModal()" data-admin>
  üßæ VIEW END OF DAY
</button>



    <button onclick="exportSalesByDate(getActiveDate())">
      üì§ Export Sales (Date)
      </button>
    <button
      data-admin
      onclick="document.getElementById('importSalesInput').click()">
      üì• Import Sales (Date)
      </button>
  
  </div>
</header>

<main>
  <div class="menu-container">
    <h3>MENU</h3><br>
    <div id="menu"></div>
  </div>

  <div id="cart">
    <h3>ORDER</h3>
    <div id="cartItems"></div>
    <div class="total-box">TOTAL ‚Ç±<span id="total">0</span></div>
    <div class="order-info">
  <div class="info-card cash">
    <span class="label">CASH</span>
    <span class="value">‚Ç±<span id="cash">0</span></span>
  </div>

  <div class="info-card change">
    <span class="label">CHANGE</span>
    <span class="value">‚Ç±<span id="change">0</span></span>
  </div>

  <div class="info-card qty">
    <span class="label">QTY</span>
    <span class="value"><span id="totalQty">0</span></span>
  </div>
</div>
  
    <div class="numpad">
      <button onclick="num(1)">1</button>
      <button onclick="num(2)">2</button>
      <button onclick="num(3)">3</button>
      <button onclick="num(4)">4</button>
      <button onclick="num(5)">5</button>
      <button onclick="num(6)">6</button>
      <button onclick="num(7)">7</button>
      <button onclick="num(8)">8</button>
      <button onclick="num(9)">9</button>
      <button onclick="clearCash()">CLR</button>
      <button onclick="num(0)">0</button>
      <button onclick="back()">‚å´</button>
    </div>

    <button class="checkout-btn" onclick="checkout()">CHECKOUT</button>
    <button class="cancel-btn" onclick="cancelOrder()">CANCEL ORDER</button>

  </div>
</main>

<section class="sales-container">

  <!-- TITLE -->
  <h3 class="sales-title">SALES HISTORY</h3>

  <!-- SUMMARY CARDS -->
  <div class="sales-summary">

  <div class="summary-card">
    <div class="label">Today Sales</div>
    <div class="value">‚Ç±<span id="todaySales">0</span></div>
  </div>

  <div class="summary-card" data-admin>
    <div class="label">Monthly Sales</div>
    <div class="value">‚Ç±<span id="monthlySales">0</span></div>
  </div>

  <div class="summary-card" data-admin
     style="cursor:pointer"
     onclick="openCommissionModal()">

  <div class="label">Commission</div>
  <div class="value">‚Ç±<span id="commissionSales">0</span></div>

  </div>


  <!-- üí∏ EXPENSES TODAY -->
  <div class="summary-card"data-admin
     style="cursor:pointer"
     onclick="openExpenseModal()">

  <div class="label">Expenses Today</div>
  <div class="value">‚Ç±<span id="expensesToday">0</span></div>

  </div>

  

</div>



  <!-- CALENDAR (BETWEEN CARDS & SALES ENTRY) -->
  <div class="sales-calendar">
    <input type="date" id="salesDate">
  </div>

  <!-- ACTION -->
  <div class="sales-actions">
    <button class="void-btn" onclick="voidAllByDate()" data-admin>
      VOID ALL
    </button>
  </div>

  <!-- SALES ENTRY -->
  <div id="salesHistory"></div>

</section>




<!-- inventory -->
<section id="productPage" class="page hidden inventory-page">

  <header class="page-header">

  <button class="back-btn" onclick="closeProductPage()">‚Üê</button>

  <!-- üì¶ INVENTORY DROPDOWN -->
  <div class="inv-title-wrap" onclick="toggleInventoryHeaderMenu()">
    <h2>üì¶ INVENTORY ‚ñæ</h2>

    <div id="inventoryHeaderMenu" class="inv-header-menu dropdown">

      <button onclick="exportInventory('csv')">üì§ Export CSV</button>
      <button onclick="exportInventory('json')">üì¶ Export JSON</button>

      <button
        data-admin
        onclick="document.getElementById('importInventoryInput').click()">
        üì• Import Inventory
      </button>
      <!-- üì• IMPORT INVENTORY INPUT (HIDDEN) -->
<input
  type="file"
  id="importInventoryInput"
  accept=".json"
  style="display:none"
/>

      
    </div>
  </div>

</header>


  <div class="inventory-toolbar">
    <input
      type="text"
      placeholder="üîç Search product..."
      oninput="filterInventory(this.value)"
    >

    <button class="save-btn" onclick="newProduct()">ADD PRODUCT</button>
  </div>

  <div class="inventory-list" id="productList"></div>

</section>

<div class="modal" id="productEditorModal">
  <div class="modal-box product-editor responsive">

    <h2 id="productEditorTitle">Product Details</h2>

    <div class="form-group">
      <label>Product Name</label>
      <input id="pname" type="text">
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Selling Price (‚Ç±)</label>
        <input id="pprice" type="number">
      </div>

      <div class="form-group" data-admin>
        <label>Cost / Retail Price (‚Ç±)</label>
        <input id="pretail" type="number">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Commission (‚Ç±)</label>
        <input id="pcomm" type="number">
      </div>

      <div class="form-group">
        <label>Stock Quantity</label>
        <input id="pstock" type="number">
      </div>
    </div>

    <div class="form-group">
      <label>Product Image</label>
      <input id="pimg" type="file" accept="image/*">
    </div>

    <div class="form-actions">
      <button class="save-btn" onclick="saveProduct()">üíæ Save</button>
      <button class="void-btn" onclick="deleteProduct(editingId)">üóë Delete</button>
      <button class="close-btn" onclick="closeProductEditor()">CLOSE</button>
    </div>

  </div>
</div>




<!-- EXPENSE MODAL -->
<div class="modal" id="expenseModal">
  <div class="modal-box">

    <h2>üí∏ Expenses</h2>

    <input id="expAmount" type="number" placeholder="Amount">
    <input id="expDesc" type="text" placeholder="Description (optional)">
    <input id="expDate" type="date">

    <div class="actions">
      <button class="save-btn" onclick="saveExpense()">ADD</button>
      <button class="close-btn" onclick="closeExpenseModal()">CLOSE</button>
    </div>

    <hr style="margin:16px 0">

    <div id="expenseList">
      <small>No expenses</small>
    </div>

  </div>
</div>

<!-- COMMISSION MODAL -->
<div class="modal" id="commissionModal">
  <div class="modal-box">

    <h2>üí∞ Commission Breakdown</h2>

    <div id="commissionList">
      <small>Loading...</small>
    </div>

    <div class="actions single">
      <button class="close-btn" onclick="closeCommissionModal()">CLOSE</button>
    </div>

  </div>
</div>

<!-- üßæ END OF DAY MODAL -->
<div class="modal" id="eodModal">
  <div class="modal-box eod-box">

    <!-- HEADER -->
    <div class="eod-header center">
  <h2>üßæ END OF DAY</h2>
  <div id="eodDate" class="eod-date"></div>
</div>


    <!-- CONTENT -->
    <div class="eod-grid">

      <!-- SUMMARY -->
      <section class="eod-summary-card">
        <h3>SUMMARY</h3>
        <div id="eodSummary"></div>
      </section>

      <!-- SALES -->
      <section>
        <h3>SALES BREAKDOWN</h3>
        <div class="eod-table" id="eodItems"></div>
      </section>

      <!-- INVENTORY -->
      <section class="full">
        <h3>UNSOLD INVENTORY</h3>
        <div class="eod-table" id="eodInventory"></div>
      </section>

    </div>

    <!-- FOOTER -->
    <div class="eod-footer">
      <button class="close-btn" onclick="closeEODModal()">CLOSE</button>
    </div>

  </div>
</div>




<!-- SYSTEM MODAL (ALERT / CONFIRM / PIN) -->
<div class="modal" id="systemModal">
  <div class="modal-box" id="systemModalBox"></div>
</div>
<!-- CHANGE PIN MODAL (UNIFORM STYLE) -->
<div class="modal" id="changePinModal">
  <div class="modal-box">

    <h2 id="cp-title">Change PIN</h2>

    <input
      id="cp-input"
      type="password"
      maxlength="6"
      placeholder=""
      inputmode="numeric"
    >

    <div class="actions">
      <button class="save-btn" onclick="changePinNext()">OK</button>
      <button class="close-btn" onclick="closeChangePin()">CANCEL</button>
    </div>

  </div>
</div>



<script>




</script>

<div id="pos-watermark">
  Powered by AMPRODUCTION
</div>
<!-- üì• IMPORT SALES INPUT (HIDDEN) -->
<input
  type="file"
  id="importSalesInput"
  accept=".json"
  style="display:none"
/>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="js/app.js"></script>

</body>
</html>
